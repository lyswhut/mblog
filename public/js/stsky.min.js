$(function(){function a(a,b){a.each(function(a){$(this).text().length>b&&$(this).text($(this).text().substring(0,b)+"……")})}var b=$(window),c=b.width(),d=b.height(),e=$("body").height();$('[data-toggle="tooltip"]').tooltip(),b.resize(function(){c=b.width(),d=b.height()}),c<768&&a($(".listContent .blogText"),95),c<992?d>e&&$("body>.footer").css("marginTop",d-e):d>e&&$("body>.footer").css("marginTop",d+20-e),c>=768&&c<992&&a($(".listContent .blogText"),210),c>=992&&c<1200&&a($(".listContent .blogText"),180),c<1200||a($(".listContent .blogText"),250),$(".blogcommentCt").length&&($(".blogcommentCt").on("click",".reply",function(a){if(0===$(this).closest(".comment").children(".addCommentCt").length){var b=$(this);return comment=b.closest(".comment"),comment.addClass("background_color1").append($(".blogcommentCt>.addCommentCt").clone()),addCommentCt=comment.children(".addCommentCt"),addCommentCt.addClass("background_color2").prepend('<span class="replyClose">︽</span>').animate({height:"335px"}).children("h3").text("回复评论"),addCommentCt.children("form").prepend('<input type="hidden" name="commentId" value="'+b.attr("data-commentId")+'">').prepend('<input type="hidden" name="floor" value="'+b.attr("data-floor")+'">').prepend('<input type="hidden" name="horizontal" value="'+b.attr("data-horizontal")+'">'),addCommentCt.children(".replyClose").on("click",function(){$(this).off("click"),$(this).closest(".comment").removeClass("background_color1"),$(this).closest(".addCommentCt").animate({height:"0"},"slow",function(){$(this).remove()})}),!1}}),$(".blogcommentCt").on("click",".ding",function(a){var b=$(this);if("default"!=b.css("cursor")){b.css("cursor","default");var c=b.children(".dingNum"),d=b.siblings(".reply"),e=$(".addCommentCt form"),f=e.attr("action"),g=e.attr("method"),h=d.attr("data-commentId"),i=d.attr("data-horizontal"),j=e.children('input[name="blogTextId"]').val(),k=e.children('input[name="_csrf"]').val();$.ajax({url:f,method:g,data:{_csrf:k,blogTextId:j,commentId:h,horizontal:i}}).done(function(a){if(a){var b=parseInt(c.text());c.text(++b)}})}}))});